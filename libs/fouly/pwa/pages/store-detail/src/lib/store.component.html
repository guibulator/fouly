<ion-header>
   <ion-toolbar>
      <ion-title>Détails</ion-title>
      <ion-buttons slot="start">
         <ion-back-button></ion-back-button>
      </ion-buttons>
      <ion-buttons slot="start">
         <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-buttons slot="end">
         <ion-icon
            padding
            *ngIf="placeDetails$"
            class="fouly-header-icon-right"
            color="primary"
            size="large"
            [name]="!(isCurrentlyFavorite$ | async) ? 'star-outline' : 'star'"
            (click)="addRemoveToFavorite()"
            >Ajouter au favoris</ion-icon
         ></ion-buttons
      >
   </ion-toolbar>
</ion-header>

<ion-content>
   <fouly-content-centered sizeLg="8">
      <ion-list *ngIf="loading$ | async">
         <ion-item>
            <ion-avatar slot="start">
               <ion-skeleton-text animated></ion-skeleton-text>
            </ion-avatar>
            <ion-label>
               <h3>
                  <ion-skeleton-text animated style="width: 50%;"></ion-skeleton-text>
               </h3>
               <p>
                  <ion-skeleton-text animated style="width: 80%;"></ion-skeleton-text>
               </p>
               <p>
                  <ion-skeleton-text animated style="width: 60%;"></ion-skeleton-text>
               </p>
            </ion-label>
         </ion-item>
      </ion-list>
      <ion-card *ngIf="!(loading$ | async) && placeDetails$ | async as placeDetails" class="card">
         <ion-img [src]="mainImage$ | async"></ion-img>
         <ion-card-header>
            <ion-label *ngIf="placeDetails[0]">
               <h3>{{ placeDetails[0].name }}</h3>
               <p [innerHtml]="placeDetails[0].adr_address"></p>
               <p [innerHtml]="placeDetails[0].business_status"></p>
               <p [innerHtml]="placeDetails[0].formatted_phone_number"></p>
               <p [innerHtml]="placeDetails[0].website"></p>
               <p *ngIf="placeDetails[0].opening_hours">
                  <strong>Présentement </strong>{{ !placeDetails[0].opening_hours.open_now ? 'FERMÉ' : 'OUVERT' }}
               </p>
            </ion-label>
         </ion-card-header>
         <ion-card-content class="content">
            <ion-item>
               <fouly-affluence class="affluence"></fouly-affluence>
            </ion-item>
            <ion-item class="item" button *ngIf="placeDetails[0]" (click)="gotoChat(placeDetails[0].name)">
               <ion-icon name="chatbubbles" size="medium"></ion-icon>
               <ion-label>&nbsp;Commentaires</ion-label>
            </ion-item>
            <ion-item class="item" button *ngIf="placeDetails[0]" (click)="gotoChat(placeDetails[0].name)">
               <ion-icon name="videocam" size="medium"></ion-icon>
               <ion-label>&nbsp;En direct</ion-label>
            </ion-item>
            <ion-item class="item" button *ngIf="placeDetails[0]" (click)="gotoFavorites()">
               <ion-icon name="star" size="medium"></ion-icon>
               <ion-label>&nbsp;Mes favoris</ion-label>
            </ion-item>
         </ion-card-content>
      </ion-card>
   </fouly-content-centered>
</ion-content>
