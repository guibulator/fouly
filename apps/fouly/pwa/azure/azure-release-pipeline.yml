# Prerequisites
# A storage account exists
# A service connection exists between devops & resource group see:
#   https://docs.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops&tabs=yaml#sep-azure-resource-manager   
#   Azure Resource Manager service connection
variables:
    STORAGE_ACCOUNT_NAME: ''
    STORAGE_ACCOUNT_KEY: ''
  
  steps:
  - task: AzureCLI@1
    displayName: 'Azure CLI '
    inputs:
      azureSubscription: 'azuredevops-fouly-serviceconnection'
      scriptLocation: inlineScript
      inlineScript: 'az storage blob upload-batch --account-name $(STORAGE_ACCOUNT_NAME) --account-key $(STORAGE_ACCOUNT_KEY) --destination $web --source ./'
      workingDirectory: '$(Build.DefaultWorkingDirectory)'